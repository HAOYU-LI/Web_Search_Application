{"ast":null,"code":"import _classCallCheck from \"/Users/lihaoyu/Documents/USC/INF551/project/Web_Search_Application/pdf-search-react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/lihaoyu/Documents/USC/INF551/project/Web_Search_Application/pdf-search-react/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/lihaoyu/Documents/USC/INF551/project/Web_Search_Application/pdf-search-react/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/lihaoyu/Documents/USC/INF551/project/Web_Search_Application/pdf-search-react/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/lihaoyu/Documents/USC/INF551/project/Web_Search_Application/pdf-search-react/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/lihaoyu/Documents/USC/INF551/project/Web_Search_Application/pdf-search-react/src/components/Searchbar.js\";\nimport React from 'react';\nimport { QElement } from './PriorityQueue';\nimport { Icon, Input, AutoComplete } from 'antd';\nimport PriorityQueue from 'js-priority-queue'; // const Search = Input.Search;\n\nvar Option = AutoComplete.Option;\n\nfunction startWith(k, value) {\n  if (k.length >= value.length) {\n    return k.startsWith(value);\n  }\n\n  return false;\n}\n\nexport var Searchbar =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Searchbar, _React$Component);\n\n  function Searchbar() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Searchbar);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Searchbar)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      userInput: 'Input search text',\n      dataSource: [],\n      wordFrequency: {}\n    };\n\n    _this.searchResult = function (value) {\n      /*\n      let count = 0;\n      const result = [];\n      const dataSource = this.props.dataSource;\n      console.log(dataSource);\n      for (let k in dataSource) {\n          if (startWith(k, value)) {\n              result.push(k)\n              count += 1;\n          }\n           if (count >= 8) {\n              break;\n          }\n      }\n      return result;\n      */\n      // PriorityQueue implementation with spark word count\n      var count = 0;\n      var result = [];\n      var wordFrequency = _this.props.wordFrequency;\n      console.log(wordFrequency);\n      var pq = new PriorityQueue({\n        comparator: function comparator(a, b) {\n          return b.priority - a.priority;\n        },\n        strategy: PriorityQueue.BHeapStrategy\n      });\n\n      for (var i = 0; i < wordFrequency.length; i++) {\n        var pair = wordFrequency[i].split(':');\n        var element = pair[0];\n        var priority = parseInt(pair[1]);\n\n        if (startWith(element.toLocaleLowerCase(), value)) {\n          console.log(element);\n          pq.queue(new QElement(element.toLocaleLowerCase(), priority));\n        }\n      }\n\n      while (pq.length > 0 && count <= 10) {\n        result.push(pq.dequeue().element);\n        count++;\n      }\n\n      return result;\n    };\n\n    _this.onInputChange = function (value) {\n      console.log(value);\n\n      _this.setState({\n        userInput: value\n      });\n\n      _this.setState({\n        dataSource: !value ? [] : _this.searchResult(value)\n      });\n    };\n\n    _this.onSearch = function () {\n      console.log(_this.state.userInput);\n\n      var strContent = _this.state.userInput.toLocaleLowerCase().trim().split(/\\s+/); //console.log(strContent);\n\n\n      _this.props.handleSearch(strContent);\n    };\n\n    _this.onSelect = function (value) {\n      console.log(\"select\");\n    };\n\n    return _this;\n  }\n\n  _createClass(Searchbar, [{\n    key: \"render\",\n    value: function render() {\n      var dataIndex = this.props.datasource; //\n      // const options = dataIndex.map(item => (\n      //\n      //     <Option className=\"show-all\" key={item.index} value={\"word\"} >\n      //         <p>\n      //             {item.key}\n      //         </p>\n      //     </Option>\n      //     )\n      // );\n\n      return React.createElement(\"div\", {\n        className: \"search_button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(AutoComplete, {\n        className: \"certain-category-search\",\n        dropdownClassName: \"certain-category-search-dropdown\",\n        dropdownmatchselectwidth: true,\n        size: \"large\",\n        dataSource: this.state.dataSource,\n        placeholder: this.state.userInput,\n        optionLabelProp: \"value\",\n        onSelect: this.onSelect,\n        onChange: this.onInputChange,\n        onSearch: this.handleSearch,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(Input, {\n        suffix: React.createElement(Icon, {\n          onClick: this.onSearch,\n          type: \"search\",\n          className: \"certain-category-icon\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125\n          },\n          __self: this\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return Searchbar;\n}(React.Component);\n{\n  /*<Search*/\n}\n{\n  /*placeholder= {this.state.userInput}*/\n}\n{\n  /*enterButton=\"Search\"*/\n}\n{\n  /*size=\"large\"*/\n}\n{\n  /*onChange = {this.onInputChange}*/\n}\n{\n  /*onSearch ={this.on_search}*/\n}\n{\n  /*/>*/\n}","map":{"version":3,"sources":["/Users/lihaoyu/Documents/USC/INF551/project/Web_Search_Application/pdf-search-react/src/components/Searchbar.js"],"names":["React","QElement","Icon","Input","AutoComplete","PriorityQueue","Option","startWith","k","value","length","startsWith","Searchbar","state","userInput","dataSource","wordFrequency","searchResult","count","result","props","console","log","pq","comparator","a","b","priority","strategy","BHeapStrategy","i","pair","split","element","parseInt","toLocaleLowerCase","queue","push","dequeue","onInputChange","setState","onSearch","strContent","trim","handleSearch","onSelect","dataIndex","datasource","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {QElement} from './PriorityQueue';\nimport { Icon, Input, AutoComplete } from 'antd';\nimport PriorityQueue from 'js-priority-queue';\n\n// const Search = Input.Search;\nconst Option = AutoComplete.Option;\n\n\nfunction startWith(k, value) {\n    if (k.length >= value.length) {\n        return k.startsWith(value);\n    }\n    return false;\n}\n\nexport class Searchbar extends React.Component {\n    state= {\n        userInput : 'Input search text',\n        dataSource: [],\n        wordFrequency : {}\n    };\n\n\n\n    searchResult = (value) => {\n        /*\n        let count = 0;\n        const result = [];\n        const dataSource = this.props.dataSource;\n        console.log(dataSource);\n        for (let k in dataSource) {\n            if (startWith(k, value)) {\n                result.push(k)\n                count += 1;\n            }\n\n            if (count >= 8) {\n                break;\n            }\n        }\n        return result;\n        */\n\n        // PriorityQueue implementation with spark word count\n        let count = 0;\n        const result = [];\n        const wordFrequency = this.props.wordFrequency;\n        console.log(wordFrequency);\n        var pq = new PriorityQueue({ comparator: function(a, b) { return b.priority - a.priority; }, strategy: PriorityQueue.BHeapStrategy});\n        for (let i = 0; i < wordFrequency.length; i ++) {\n            let pair = wordFrequency[i].split(':');\n            let element = pair[0];\n            let priority = parseInt(pair[1]);\n            if (startWith(element.toLocaleLowerCase(), value)) {\n                console.log(element);\n                pq.queue(new QElement(element.toLocaleLowerCase(), priority));\n            }\n        }\n\n        while(pq.length > 0 && count <= 10) {\n            result.push(pq.dequeue().element);\n            count ++;\n        }\n\n        return result;\n\n    }\n\n\n    onInputChange = (value) =>{\n        console.log(value);\n        this.setState({userInput : value});\n        this.setState({\n            dataSource: !value ? [] : this.searchResult(value)\n        });\n    }\n\n    onSearch = () =>  {\n        console.log(this.state.userInput);\n        const strContent = this.state.userInput.toLocaleLowerCase().trim().split(/\\s+/);\n        //console.log(strContent);\n        this.props.handleSearch(strContent);\n\n    }\n\n    onSelect = (value) =>{\n        console.log(\"select\");\n    }\n\n\n\n\n    render() {\n        const dataIndex =  this.props.datasource;\n\n\n        //\n        // const options = dataIndex.map(item => (\n        //\n        //     <Option className=\"show-all\" key={item.index} value={\"word\"} >\n        //         <p>\n        //             {item.key}\n        //         </p>\n        //     </Option>\n        //     )\n        // );\n\n\n        return (\n\n            <div className=\"search_button\">\n                <AutoComplete\n                    className=\"certain-category-search\"\n                    dropdownClassName=\"certain-category-search-dropdown\"\n                    dropdownmatchselectwidth={true}\n                    size=\"large\"\n                    dataSource={this.state.dataSource}\n                    placeholder={this.state.userInput}\n                    optionLabelProp=\"value\"\n                    onSelect={this.onSelect}\n                    onChange={this.onInputChange}\n                    onSearch={this.handleSearch}\n                >\n                    <Input  suffix={<Icon onClick={this.onSearch} type=\"search\" className=\"certain-category-icon\" />} />\n                </AutoComplete>\n            </div>\n        );\n    }\n}\n\n\n\n{/*<Search*/}\n{/*placeholder= {this.state.userInput}*/}\n{/*enterButton=\"Search\"*/}\n{/*size=\"large\"*/}\n{/*onChange = {this.onInputChange}*/}\n\n{/*onSearch ={this.on_search}*/}\n{/*/>*/}\n"]},"metadata":{},"sourceType":"module"}